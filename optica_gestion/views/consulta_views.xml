<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Vista de lista de consultas -->
        <record id="view_optica_consulta_list" model="ir.ui.view">
            <field name="name">optica.consulta.list</field>
            <field name="model">optica.consulta</field>
            <field name="arch" type="xml">
                <list string="Consultas">
                    <field name="fecha"/>
                    <field name="partner_id" string="Paciente"/>
                    <field name="edad_consulta" string="Edad"/>
                    <field name="rx_od_esfera" string="RX OD Esf"/>
                    <field name="rx_od_cilindro" string="RX OD Cil"/>
                    <field name="rx_oi_esfera" string="RX OI Esf"/>
                    <field name="rx_oi_cilindro" string="RX OI Cil"/>
                    <field name="rx_observaciones" string="Observaciones" optional="hide"/>
                </list>
            </field>
        </record>

        <!-- Vista de formulario de consulta (popup desde contacto) -->
        <record id="view_optica_consulta_form" model="ir.ui.view">
            <field name="name">optica.consulta.form</field>
            <field name="model">optica.consulta</field>
            <field name="arch" type="xml">
                <form string="Consulta">
                    <sheet>
                        <!-- Encabezado: Paciente y Edad -->
                        <div class="oe_title">
                            <h1>
                                <span>Paciente: </span>
                                <field name="partner_id" readonly="1" options="{'no_open': True}" class="oe_inline"/>
                            </h1>
                            <h3>
                                <span>Edad: </span>
                                <field name="edad_consulta" class="oe_inline"/>
                            </h3>
                        </div>

                        <group>
                            <group>
                                <field name="fecha" string="Fecha" readonly="1"/>
                            </group>
                            <group>
                                <field name="optometrista_id" string="Realizado por"/>
                            </group>
                        </group>

                        <notebook>
                            <page string="Alcance Visual">
                                <!-- AV -->
                                <separator string="AV"/>
                                <div class="o_group">
                                    <table class="table table-sm table-bordered" style="width: auto;">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 60px;">AV</th>
                                                <th style="width: 120px;">AV/SL</th>
                                                <th style="width: 120px;">AV/CL</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>OD</strong></td>
                                                <td><span class="text-muted">20/</span><field name="av_sl_od" nolabel="1" class="oe_inline" style="width: 50px;"/></td>
                                                <td><span class="text-muted">20/</span><field name="av_cl_od" nolabel="1" class="oe_inline" style="width: 50px;"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>OI</strong></td>
                                                <td><span class="text-muted">20/</span><field name="av_sl_oi" nolabel="1" class="oe_inline" style="width: 50px;"/></td>
                                                <td><span class="text-muted">20/</span><field name="av_cl_oi" nolabel="1" class="oe_inline" style="width: 50px;"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- LENSOMETRÍA -->
                                <separator string="LENSOMETRÍA"/>
                                <div class="o_group">
                                    <table class="table table-sm table-bordered" style="width: auto;">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 60px;">Ojo</th>
                                                <th style="width: 80px;">Esfera</th>
                                                <th style="width: 80px;">Cilindro</th>
                                                <th style="width: 60px;">Eje</th>
                                                <th style="width: 60px;">ADD</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>OD</strong></td>
                                                <td><field name="lens_od_esfera" nolabel="1"/></td>
                                                <td><field name="lens_od_cilindro" nolabel="1"/></td>
                                                <td><field name="lens_od_eje" nolabel="1"/></td>
                                                <td><field name="lens_od_add" nolabel="1"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>OI</strong></td>
                                                <td><field name="lens_oi_esfera" nolabel="1"/></td>
                                                <td><field name="lens_oi_cilindro" nolabel="1"/></td>
                                                <td><field name="lens_oi_eje" nolabel="1"/></td>
                                                <td><field name="lens_oi_add" nolabel="1"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- RETINOSCOPÍA -->
                                <separator string="RETINOSCOPÍA"/>
                                <div class="o_group">
                                    <table class="table table-sm table-bordered" style="width: auto;">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 60px;">OJO</th>
                                                <th style="width: 80px;">ESFERA</th>
                                                <th style="width: 80px;">CILINDRO</th>
                                                <th style="width: 60px;">EJE</th>
                                                <th style="width: 60px;">AV</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>OD</strong></td>
                                                <td><field name="ret_od_esfera" nolabel="1"/></td>
                                                <td><field name="ret_od_cilindro" nolabel="1"/></td>
                                                <td><field name="ret_od_eje" nolabel="1"/></td>
                                                <td><field name="ret_od_av" nolabel="1"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>OI</strong></td>
                                                <td><field name="ret_oi_esfera" nolabel="1"/></td>
                                                <td><field name="ret_oi_cilindro" nolabel="1"/></td>
                                                <td><field name="ret_oi_eje" nolabel="1"/></td>
                                                <td><field name="ret_oi_av" nolabel="1"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- RX/Nueva -->
                                <separator string="Rx/Nueva"/>
                                <div class="o_group">
                                    <table class="table table-sm table-bordered" style="width: auto;">
                                        <thead class="table-light">
                                            <tr>
                                                <th style="width: 60px;">OJO</th>
                                                <th style="width: 80px;">ESFERA</th>
                                                <th style="width: 80px;">CILINDRO</th>
                                                <th style="width: 60px;">EJE</th>
                                                <th style="width: 60px;">ADD</th>
                                                <th style="width: 60px;">AV</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>OD</strong></td>
                                                <td><field name="rx_od_esfera" nolabel="1"/></td>
                                                <td><field name="rx_od_cilindro" nolabel="1"/></td>
                                                <td><field name="rx_od_eje" nolabel="1"/></td>
                                                <td><field name="rx_od_add" nolabel="1"/></td>
                                                <td><field name="rx_od_av" nolabel="1"/></td>
                                            </tr>
                                            <tr>
                                                <td><strong>OI</strong></td>
                                                <td><field name="rx_oi_esfera" nolabel="1"/></td>
                                                <td><field name="rx_oi_cilindro" nolabel="1"/></td>
                                                <td><field name="rx_oi_eje" nolabel="1"/></td>
                                                <td><field name="rx_oi_add" nolabel="1"/></td>
                                                <td><field name="rx_oi_av" nolabel="1"/></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Observaciones -->
                                <separator string="OBSERVACIONES"/>
                                <group>
                                    <field name="rx_observaciones" nolabel="1" placeholder="Observaciones del examen..."/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
    </data>
</odoo>
